# Solution T-Hack Грин МИСИС
Проект представляет собой веб-приложение на Streamlit, позволяющее пользователю загружать текстовый файл(PDF или TXT) какой-либо статьи и наблюдать за диалогом между отцом и дочерью, которые обсуждают содержание файла. Приложение генерирует вопросы дочери и ответы отца на основе загруженного текста, а также поддерживает возможность записи этого диалога в аудиоформате с настройкой уровня фонового шума. Одной из дополнительных особенностей является возможность выбора возраста девочки, что влияет на глубину и уровень вопросов.
## Основные функции
- **Загрузка файла**: Поддерживаются файлы форматов PDF и TXT. После загрузки файл обрабатывается, и его текстовое содержание извлекается для анализа.
- **Генерация диалога**: На основе содержимого файла создается диалог между отцом и дочерью. Дочь задает вопросы по тексту, а отец отвечает.
- **Настройка возраста дочери**: Пользователь может выбрать возраст дочери, что влияет на стиль и уровень вопросов.
- **Фоновый шум**: Пользователь может выбрать уровень фонового шума, который будет добавлен к аудиозаписи, что придаст диалогу реалистичности.
- **Запись и воспроизведение аудио**: Сгенерированный диалог конвертируется в аудиофайл с использованием модуля Text2Speech.

## Основные компоненты
- **OpenAI**: Используется для генерации вопросов и ответов в диалоге.
- **load_and_extract_text**: Функция из модуля `utils`, которая загружает и извлекает текст из загруженного файла.
- **get_dialogue и get_router_result**: Функции из модуля `llm`, которые обрабатывают текст и определяют, можно ли создать диалог на основе содержимого файла.
- **PromptClass**: Класс для хранения стандартных ответов, если невозможно сгенерировать осмысленный диалог.
- **Text2Speech**: Модуль для преобразования текста диалога в аудиоформат с возможностью постобработки и добавления фонового шума.

## Пользовательский интерфейс
- **Выбор параметров**: Пользователь может выбрать возраст дочери и уровень шума на фоне.
- **Отображение диалога**: Сообщения отца и дочери визуализируются в интерфейсе с разным фоном, который помогает отличить их реплики.
- **Чат-ввод**: Поле для ввода текста, в котором пользователь может задать вопросы, на которые отец и дочь ответят на основе текущего текста.
- **Аудиоплеер**: Поддержка воспроизведения финального аудиофайла в формате WAV.

## Запуск
python >= 3.10.4
1. Клонирование репозитория
```
git clone ...
```
2. Установка зависимостей
```
python -m venv env
env/Scripts/activate
pip install -r requirements.txt
```
3. Добавление ключей в .env
```
touch .env # Pass API_KEY=<pass your openai api key>, SPEECH_KEY=<pass your tinkoff tts key> 
```
4. Запуск streamlit
```
stremlit run app.py
```
